# ViewData, ViewBag, and TempData in ASP.NET Core MVC

## Overview

In ASP.NET Core MVC, `ViewData`, `ViewBag`, and `TempData` are used for passing data between controllers and views. Each of these has different scopes and lifetimes.

## Key Differences

| Feature                      | ViewData                               | ViewBag                                | TempData                               |
| ---------------------------- | -------------------------------------- | -------------------------------------- | -------------------------------------- |
| Type                         | Dictionary (ViewDataDictionary)        | Dynamic Property (ExpandoObject)       | Dictionary (TempDataDictionary)        |
| Data Lifetime                | Only available for the current request | Only available for the current request | Available across requests (until read) |
| Data Type                    | Requires explicit casting              | No casting required (dynamic property) | Requires explicit casting              |
| Use Case                     | Pass data from controller to view      | Pass data from controller to view      | Pass data between actions/controllers  |
| Retains Data After Redirect? | No                                     | No                                     | Yes (until accessed once)              |

## Usage

### HomeController Example

```csharp
public class HomeController : Controller
{
    public IActionResult Index()
    {
        List<string> os = new List<string> { "Suresh", "Naren", "Nithya" };

        ViewData["Title"] = "MSDEVBUILD"; // ViewData Example
        ViewBag.Usernames = os; // ViewBag Example
        TempData["Age"] = 23; // TempData Example

        return View();
    }

    public IActionResult AboutUS()
    {
        return View();
    }
}
```

### ProductController Example

```csharp
public class ProductController : Controller
{
    public IActionResult Index()
    {
        return View();
    }
}
```

## Where and Why to Use

### ViewData

- **Where**: Used in the same controller-action request.
- **Why**: Suitable for passing data to views where casting is acceptable.
- **Example Usage in View**:
  ```html
  <h1>@ViewData["Title"]</h1>
  ```
- **Converting ViewData Value**:
  ```csharp
  string title = ViewData["Title"] as string;
  ```

### ViewBag

- **Where**: Used in the same controller-action request.
- **Why**: Preferred over `ViewData` as it does not require explicit casting.
- **Example Usage in View**:
  ```html
  @{
      List<string> listvalue = ViewBag.Usernames;
      foreach (var item in listvalue)
      {
          <h1>@item</h1>
      }
  }
  ```

### TempData

- **Where**: Used for passing data between two different requests (e.g., between actions or controllers).
- **Why**: Useful for temporary data like success/error messages.
- **Example Usage in View**:
  ```html
  <h1>@TempData["Age"]</h1>
  ```

### TempData Methods

#### 1. `TempData.Peek("key")`
- **What it does**: Reads the value without removing it.
- **Use case**: If you want to access `TempData` multiple times within the same request.
- **Example**:
  ```csharp
  var age = TempData.Peek("Age");
  ```

#### 2. `TempData.Keep("key")`
- **What it does**: Keeps the value even after reading it, so it persists across requests.
- **Use case**: Ensuring `TempData` value is available for multiple subsequent requests.
- **Example**:
  ```csharp
  TempData.Keep("Age");
  ```

## Example Views

### Home Index View (`Views/Home/Index.cshtml`)

```html
<h1>@TempData.Peek("Age").ToString()</h1>
@{
    List<string> listvalue = ViewBag.Usernames;
    foreach (var item in listvalue)
    {
        <h1>@item</h1>
    }
}
```

### Home About Us View (`Views/Home/AboutUs.cshtml`)

```html
<h1>AboutUS</h1>
<h1>@ViewData["Title"]</h1>
<h1>@TempData["Age"]</h1>
```

### Product Index View (`Views/Product/Index.cshtml`)

```html
<h1>@TempData["Age"]</h1>
<h1>@ViewData["Title"]</h1>
<h1>Product details</h1>
```

## Interview Questions and Answers

### 1. **What is `ViewData` in ASP.NET Core MVC?**
**Answer:** `ViewData` is a dictionary object used to pass data from the controller to the view. It requires explicit casting when retrieving data.

### 2. **What is `ViewBag` and how is it different from `ViewData`?**
**Answer:** `ViewBag` is a dynamic property that allows data to be passed from the controller to the view without explicit casting. Unlike `ViewData`, `ViewBag` uses dynamic typing.

### 3. **What is `TempData` and how does it persist data across requests?**
**Answer:** `TempData` is a dictionary object used to store data across multiple requests. It retains data until it is read, unless `TempData.Keep()` is used to persist it further.

### 4. **What is the difference between `TempData.Peek()` and `TempData.Keep()`?**
**Answer:**
- `TempData.Peek()` allows reading data without removing it.
- `TempData.Keep()` ensures the value is retained even after being read.

### 5. **When should we use `TempData` instead of `ViewData` or `ViewBag`?**
**Answer:** `TempData` should be used when data needs to persist across multiple requests, such as in redirect scenarios.

## Conclusion

- Use **ViewData** and **ViewBag** for passing data between controllers and views within the same request.
- Use **TempData** when passing data between different actions or controllers across multiple requests.
- `ViewBag` is easier to use than `ViewData` as it doesnâ€™t require explicit casting.
- `TempData` should be used sparingly, mainly for scenarios like displaying success/error messages after redirection.

## Connect with Me
- **LinkedIn**: [Suthahar Jeganathan](https://www.linkedin.com/in/jssuthahar/)
- **YouTube**: [MSDEVBUILD](https://www.youtube.com/@MSDEVBUILD)
- **YouTube Tamil**: [MSDEVBUILD TAMIL](https://www.youtube.com/@MSDEVBUILDTamil)
- **Blog**: [Blog](https://www.msdevbuild.com/)
- **Follow Whatsapp**: [Whatsapp](https://www.whatsapp.com/channel/0029Va5j2rHEFeXcTlUhQB0J)

