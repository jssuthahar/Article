# Entity Framework Core CRUD Operations in a .NET Core Web Application

## Perform CRUD Operations Inside Action Methods

### Create (Insert) a Record
```csharp
[HttpPost]
public IActionResult Create(Student student)
{
    using (var context = new AppDBContext(options))
    {
        context.Students.Add(student);
        context.SaveChanges();
    }
    return Ok("Student Added Successfully");
}
```

### Read (Retrieve) Records
```csharp
[HttpGet]
public IActionResult GetAll()
{
    using (var context = new AppDBContext(options))
    {
        var students = context.Students.ToList();
        return Ok(students);
    }
}
```

### Update a Record
```csharp
[HttpPut]
public IActionResult Update(int id, Student updatedStudent)
{
    using (var context = new AppDBContext(options))
    {
        var student = context.Students.FirstOrDefault(s => s.Id == id);
        if (student != null)
        {
            student.Name = updatedStudent.Name;
            student.Age = updatedStudent.Age;
            context.SaveChanges();
            return Ok("Student Updated Successfully");
        }
        return NotFound("Student Not Found");
    }
}
```

### Delete a Record
```csharp
[HttpDelete]
public IActionResult Delete(int id)
{
    using (var context = new AppDBContext(options))
    {
        var student = context.Students.FirstOrDefault(s => s.Id == id);
        if (student != null)
        {
            context.Students.Remove(student);
            context.SaveChanges();
            return Ok("Student Deleted Successfully");
        }
        return NotFound("Student Not Found");
    }
}
```

## Run Migrations & Update Database (Optinal)
```sh
dotnet ef migrations add InitialCreate
dotnet ef database update
```

## Interview Questions & Answers

1. **What is the role of DbContext in EF Core?**
   - It acts as a bridge between the application and the database, managing entity objects and database interactions.

2. **How does EF Core track changes?**
   - It tracks entity state (Added, Modified, Deleted) and applies those changes during `SaveChanges()`.

3. **What method is used to update an entity?**
   - Modify the properties and call `context.SaveChanges()`.

4. **What is the purpose of migrations in EF Core?**
   - Migrations help track changes in the database schema and apply updates incrementally.

5. **How do you apply pending migrations in EF Core?**
   - Run `dotnet ef database update` in the command line.

6. **What happens if you modify a model class after applying migrations?**
   - You need to create a new migration using `dotnet ef migrations add MigrationName` and update the database.

7. **How do you rollback a migration in EF Core?**
   - Use `dotnet ef migrations remove` to remove the last migration before applying it to the database.

8. **What is the difference between `Add` and `Attach` in EF Core?**
   - `Add` marks an entity as new (Added state), while `Attach` only tracks an existing entity without marking changes.

9. **How do you enable lazy loading in EF Core?**
   - Use `virtual` navigation properties and install `Microsoft.EntityFrameworkCore.Proxies`, then configure it using `UseLazyLoadingProxies()`.

10. **What is the difference between `Find` and `FirstOrDefault` in EF Core?**
    - `Find` retrieves an entity by primary key and uses caching, whereas `FirstOrDefault` queries the database directly.


## Connect with Me
- **LinkedIn**: [Suthahar Jeganathan](https://www.linkedin.com/in/jssuthahar/)
- **YouTube**: [MSDEVBUILD](https://www.youtube.com/@MSDEVBUILD)
- **YouTube Tamil**: [MSDEVBUILD TAMIL](https://www.youtube.com/@MSDEVBUILDTamil)
- **Blog**: [Blog](https://www.msdevbuild.com/)
- **Follow Whatsapp**: [Whatsapp](https://www.whatsapp.com/channel/0029Va5j2rHEFeXcTlUhQB0J)


