# Entity Framework Core CRUD Operations in a .NET Core Web Application (Razor Pages & MVC)

## Initial Setup
Refer to the following link for the initial setup of Entity Framework Core:
[Entity Framework Core Initial Setup](https://github.com/jssuthahar/MSDEVBUILD-Doc/blob/main/DotnetCore/EF/01%20Entity%20Framework%20Core.md)

## Implement CRUD Operations in Controller

```csharp
public class UserController : Controller
{
    private readonly AppDBContext appDBContextObj;
    
    public UserController(AppDBContext appDBContext)
    {
        appDBContextObj = appDBContext;
    }

    public IActionResult Register()
    {
        return View(new Student());
    }
    
    [HttpPost]
    public IActionResult SaveData(Student data)
    {
        appDBContextObj.Students.Add(data);
        appDBContextObj.SaveChanges();
        return RedirectToAction("List");
    }
    
    [Route("User/ReadData/{id}")]
    public IActionResult ReadData(int id)
    {
        var single = appDBContextObj.Students.FirstOrDefault(x => x.Sid == id);
        return View("Register", single);
    }

    [Route("User/DeleteData/{Sid}")]
    public IActionResult DeleteData(int Sid)
    {
        var single = appDBContextObj.Students.FirstOrDefault(x => x.Sid == Sid);
        if(single != null)
        {
            appDBContextObj.Students.Remove(single);
            appDBContextObj.SaveChanges();
        }
        return RedirectToAction("List");
    }

    public IActionResult List()
    {
        var students = appDBContextObj.Students.ToList();
        return View(students);
    }

    [HttpPost]
    public IActionResult UpdateData(Student data)
    {
        var existingStudent = appDBContextObj.Students.FirstOrDefault(x => x.Sid == data.Sid);
        if (existingStudent != null)
        {
            existingStudent.Name = data.Name;
            existingStudent.Age = data.Age;
            appDBContextObj.SaveChanges();
        }
        return RedirectToAction("List");
    }
}
```

## Create Razor Page Views

### Register.cshtml
```html
@model Student

<form asp-action="SaveData" method="post">
    <label>Name:</label>
    <input asp-for="Name" />
    <label>Age:</label>
    <input asp-for="Age" />
    <button type="submit">Submit</button>
</form>
```

### List.cshtml
```html
@model List<Student>

<table>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Age</th>
        <th>Actions</th>
    </tr>
    @foreach (var student in Model)
    {
        <tr>
            <td>@student.Sid</td>
            <td>@student.Name</td>
            <td>@student.Age</td>
            <td>
                <a asp-action="ReadData" asp-route-id="@student.Sid">Edit</a>
                <a asp-action="DeleteData" asp-route-Sid="@student.Sid">Delete</a>
            </td>
        </tr>
    }
</table>
```


## Interview Questions & Answers

1. **What is the purpose of the DbContext in EF Core?**
   - It manages database interactions and entity tracking.

2. **How does EF Core handle CRUD operations?**
   - Using `DbSet<T>` for Create, Read, Update, and Delete (CRUD) operations.

3. **What is the difference between `SaveChanges()` and `SaveChangesAsync()`?**
   - `SaveChanges()` is synchronous, whereas `SaveChangesAsync()` is asynchronous and improves performance in scenarios with multiple database operations.

4. **What is lazy loading in EF Core?**
   - Lazy loading means that related entities are loaded from the database only when they are accessed for the first time.

5. **What is eager loading in EF Core?**
   - Eager loading loads related entities at the same time as the main entity using the `Include()` method.

6. **How do you handle database migrations in EF Core?**
   - By using the commands `dotnet ef migrations add <MigrationName>` and `dotnet ef database update`.

7. **How do you update an entity in EF Core?**
   - Fetch the entity, modify its properties, and call `SaveChanges()`.

8. **What is the purpose of `DbSet<T>` in EF Core?**
   - It represents a table in the database and allows querying and saving instances of the entity type.

9. **What is change tracking in EF Core?**
   - It keeps track of changes made to entities in memory before committing them to the database.

10. **What is the use of `OnModelCreating` method in EF Core?**
   - It is used for configuring entity relationships, constraints, and table mappings when the model is created.

## Connect with Me
- **LinkedIn**: [Suthahar Jeganathan](https://www.linkedin.com/in/jssuthahar/)
- **YouTube**: [MSDEVBUILD](https://www.youtube.com/@MSDEVBUILD)
- **YouTube Tamil**: [MSDEVBUILD TAMIL](https://www.youtube.com/@MSDEVBUILDTamil)
- **Blog**: [Blog](https://www.msdevbuild.com/)
- **Follow Whatsapp**: [Whatsapp](https://www.whatsapp.com/channel/0029Va5j2rHEFeXcTlUhQB0J)
