# 🔐 Azure Shared Access Signature (SAS) 

## 📘 Overview

**Shared Access Signatures (SAS)** are secure **URLs with limited access** to Azure Storage resources (Blob, File, Queue, Table), allowing you to **grant specific permissions** (read, write, list, delete, etc.) **for a limited time**, **without exposing the storage account key**.

---

## ❓ Why Use SAS?

| Benefit                    | Description                                                                     |
| -------------------------- | ------------------------------------------------------------------------------- |
| 🔒 **Granular Access**     | Grant access only to specific containers, blobs, or files                       |
| ⏳ **Time-Bound**           | Set start and expiry times for access                                           |
| 👤 **Limited Permissions** | Allow only what’s needed: Read, Write, List, Delete                             |
| 🔐 **Keyless Sharing**     | Avoid exposing your Storage Account keys                                        |
| 🌐 **URL-Based Access**    | Easily shareable as a signed URL (e.g., with a client, app, or external system) |

---

## 💡 Real-Time Use Cases

| Scenario            | Use                                                               |
| ------------------- | ----------------------------------------------------------------- |
| 📁 Share a file     | Send a blob URL that expires in 1 hour with read-only permission  |
| 📤 Temporary upload | Allow clients to upload files directly to a container for 15 mins |
| 📦 Web app hosting  | Host a static website using blobs with limited public access      |
| 🔄 Automation       | Backend services upload/download using scheduled SAS tokens       |
| 🧪 Testing          | Grant short-term access for QA or dev environments                |

---

## 🔐 SAS Token Types

| Type                    | Description                                                                 |
| ----------------------- | --------------------------------------------------------------------------- |
| **User Delegation SAS** | Uses Azure AD credentials (more secure, identity-based)                     |
| **Service SAS**         | Signed with storage account key; can target specific services and resources |
| **Account SAS**         | Allows access to **multiple services** (Blob, File, Queue, Table)           |

---

## 🧭 How to Create a SAS Token in Azure Portal

### ✅ Step 1: Go to Your Storage Account

1. Open [Azure Portal](https://portal.azure.com)
2. Navigate to **Storage Accounts**
3. Select your **target storage account**

---

### ✅ Step 2: Go to Containers or Blobs

1. Open **Containers**
2. Choose a container or blob
3. Click **Generate SAS** (or **Shared access signature**)

---

### ✅ Step 3: Configure the SAS Settings

* Choose:

  * **Allowed permissions** (Read, Write, Delete, List, etc.)
  * **Start and expiry date/time**
  * **Allowed IP range** (optional)
  * **Allowed protocols** (HTTPS recommended)
* Click **Generate SAS token and URL**

✅ You’ll see:

* **Blob URL**
* **SAS token**
* **Full URL with SAS**

---

## 📦 Example SAS URL

```bash
https://mystorage.blob.core.windows.net/mycontainer/myfile.txt?sv=2023-11-03&st=2024-06-19T06%3A00%3A00Z&se=2024-06-20T06%3A00%3A00Z&sr=b&sp=r&sig=abc123xyz
```

* **`sp=r`** = read permission
* **`se=`** = expiry time
* **`sig=`** = the signature
* Share this URL securely.

---

## 🛠️ Using SAS in Code (Example in C#)

```csharp
var blobUri = new Uri("https://mystorage.blob.core.windows.net/container/file.txt?{SAS_TOKEN}");
CloudBlockBlob blob = new CloudBlockBlob(blobUri);
string content = await blob.DownloadTextAsync();
```

---

## 🔒 Security Best Practices

| Recommendation             | Reason                                               |
| -------------------------- | ---------------------------------------------------- |
| ✅ Use HTTPS                | Prevent sniffing of token                            |
| ⏳ Set short expiry         | Reduce risk window if token leaks                    |
| 🔐 Use User Delegation SAS | Secure with Azure AD instead of account key          |
| 🔁 Rotate keys regularly   | If using Service SAS with account keys               |
| ❌ Do not log full SAS URL  | Avoid leaking credentials in logs or browser history |

---

## 🧾 Summary Table

| Feature         | Details                                       |
| --------------- | --------------------------------------------- |
| Token Scope     | Container, Blob, File, Queue, Table           |
| Validity Period | Custom start & expiry time                    |
| Permissions     | Read, Write, List, Delete, etc.               |
| Types           | Service SAS, Account SAS, User Delegation SAS |
| Security Level  | High (when scoped and time-limited properly)  |

---

## 📁 When to Use SAS vs Access Key

| Use                                     | SAS          | Access Key |
| --------------------------------------- | ------------ | ---------- |
| Share temporary access                  | ✅            | ❌          |
| Programmatic admin access               | ❌            | ✅          |
| Scoped, time-bound permissions          | ✅            | ❌          |
| Secure, auditable usage (with Azure AD) | ✅ (User SAS) | ❌          |
| Full control over storage               | ❌            | ✅          |

---

## 🧠 Final Notes

* SAS is perfect for **least-privilege access**
* Works with Azure Blob, File, Queue, and Table Storage
* Use **User Delegation SAS** for enhanced security (requires Azure AD + RBAC)

## Connect with Me
- **LinkedIn**: [Suthahar Jeganathan](https://www.linkedin.com/in/jssuthahar/)
- **YouTube**: [MSDEVBUILD](https://www.youtube.com/@MSDEVBUILD)
- **YouTube Tamil**: [MSDEVBUILD TAMIL](https://www.youtube.com/@MSDEVBUILDTamil)
- **Blog**: [Blog](https://www.msdevbuild.com/)
- **Follow Whatsapp**: [Whatsapp](https://www.whatsapp.com/channel/0029Va5j2rHEFeXcTlUhQB0J)
