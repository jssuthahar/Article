
# SQL Server View: `OrderUser`

## 📘 Overview

This project demonstrates the creation and usage of a **SQL Server view** named `OrderUser`. The view joins multiple tables to provide a user-friendly snapshot of users, their orders, and ordered products.

---

## 🧱 View Definition

```sql
-- Drop the view if it exists
DROP VIEW IF EXISTS OrderUser;

-- Create the view
CREATE VIEW OrderUser AS
SELECT 
    u.FullName,
    o.TotalAmount,
    u.Email,
    p.ProductName
FROM Users u
INNER JOIN Orders o ON u.UserId = o.UserID
INNER JOIN OrderItems oi ON o.OrderID = oi.OrderId
INNER JOIN Products p ON p.ProductId = oi.ProductId;
````

---

## 📊 Sample Tables & Data

### Users

| UserId | FullName   | Email                                       |
| ------ | ---------- | ------------------------------------------- |
| 1      | John Doe   | [john@example.com](mailto:john@example.com) |
| 2      | Jane Smith | [jane@example.com](mailto:jane@example.com) |

### Orders

| OrderID | UserID | TotalAmount |
| ------- | ------ | ----------- |
| 101     | 1      | 120.00      |
| 102     | 2      | 50.00       |

### OrderItems

| OrderItemID | OrderId | ProductId |
| ----------- | ------- | --------- |
| 1           | 101     | 201       |
| 2           | 102     | 202       |

### Products

| ProductId | ProductName |
| --------- | ----------- |
| 201       | Keyboard    |
| 202       | Mouse       |

---

## 📌 Sample Query on View

```sql
-- Get users who made orders with TotalAmount > 80
SELECT * FROM OrderUser WHERE TotalAmount > 80;
```

**Output:**

| FullName | TotalAmount | Email                                       | ProductName |
| -------- | ----------- | ------------------------------------------- | ----------- |
| John Doe | 120.00      | [john@example.com](mailto:john@example.com) | Keyboard    |

---

## ✏️ INSERT, UPDATE, DELETE on Views

> In SQL Server, `INSERT`, `UPDATE`, and `DELETE` operations **can be done only on views** that reference **a single table** and do not include `GROUP BY`, `JOIN`, `DISTINCT`, or aggregate functions.

Since `OrderUser` involves multiple joins, **you cannot directly modify data through this view**. If needed, consider creating an **`INSTEAD OF` trigger**.

---

## 💬 Interview Questions & Answers

### Q1: What is a view in SQL Server?

**A:** A view is a virtual table based on the result-set of a SQL query. It simplifies complex joins and hides table structure from users.

---

### Q2: Can you insert data into a view?

**A:** Yes, but only if the view is based on a single table and doesn’t use `JOIN`, `GROUP BY`, or aggregate functions.

---

### Q3: What are the benefits of using a view?

**A:**

* Simplifies complex queries
* Enhances security by restricting access to specific columns
* Provides data abstraction

---

### Q4: What is an indexed view?

**A:** An indexed view (also known as a materialized view) stores the result set physically and improves performance but has strict limitations (e.g., determinism, schema binding).

---

### Q5: How can you update data through a view?

**A:** You can update data **only** if the view refers to a **single base table** and does not use operations like joins or aggregates.

---

## ✅ Summary

* `OrderUser` combines data from 4 tables into a single, readable view.
* Useful for reporting and filtering user order data.
* Cannot be updated due to multi-table joins.

---
 ## Connect with Me
- **LinkedIn**: [Suthahar Jeganathan](https://www.linkedin.com/in/jssuthahar/)
- **YouTube**: [MSDEVBUILD](https://www.youtube.com/@MSDEVBUILD)
- **YouTube Tamil**: [MSDEVBUILD TAMIL](https://www.youtube.com/@MSDEVBUILDTamil)
- **Blog**: [Blog](https://www.msdevbuild.com/)
- **Follow Whatsapp**: [Whatsapp](https://www.whatsapp.com/channel/0029Va5j2rHEFeXcTlUhQB0J)
